

# ğŸš€ AplicaciÃ³n Node.js con Docker  

Este proyecto es una aplicaciÃ³n Node.js que se ejecuta dentro de un contenedor Docker.  

---

## ğŸ“Œ **Requisitos**  
Antes de comenzar, asegÃºrate de tener instalado:  
- [Node.js](https://nodejs.org/)  
- [Docker](https://www.docker.com/)  

---

## ğŸ“‚ **Estructura del Proyecto**  
```
03/
â”‚â”€â”€ Dockerfile
â”‚â”€â”€ package.json
â”‚â”€â”€ package-lock.json
â”‚â”€â”€ server.js
â”‚â”€â”€ .dockerignore
â”‚â”€â”€ node_modules/ (se generarÃ¡ con npm install, no se copia a Docker)
```

---

## ğŸ”§ **ConfiguraciÃ³n del Proyecto**  

### 1ï¸âƒ£ **Crear `.dockerignore`**  
Crea un archivo `.dockerignore` con el siguiente contenido:  

```
node_modules
npm-debug.log
yarn-error.log
.DS_Store
Thumbs.db
.git
.gitignore
.dockerignore
.env
```

---

### 2ï¸âƒ£ **Revisar `package.json`**  
AsegÃºrate de que `package.json` tenga la secciÃ³n `"scripts"`:  

```json
{
  "name": "mi-app",
  "version": "1.0.0",
  "description": "AplicaciÃ³n en Node.js con Docker",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.2"
  }
}
```

---

### 3ï¸âƒ£ **Crear `server.js`**  
Si no tienes un archivo de entrada, crea `server.js` con el siguiente contenido:  

```javascript
const express = require('express');
const app = express();
const PORT = process.env.PORT || 8080;

app.get('/', (req, res) => {
    res.send('Â¡Servidor corriendo en Docker!');
});

app.listen(PORT, () => {
    console.log(`Servidor iniciado en http://localhost:${PORT}`);
});
```

---

### 4ï¸âƒ£ **Crear `Dockerfile`**  
Crea un archivo `Dockerfile` con el siguiente contenido:  

```dockerfile
# Usar Node.js como imagen base
FROM node:14

# Definir el directorio de trabajo dentro del contenedor
WORKDIR /app

# Copiar package.json y package-lock.json antes de instalar dependencias
COPY package*.json ./
RUN npm install

# Copiar el resto del cÃ³digo al contenedor
COPY . .

# Exponer el puerto 8080 (documentaciÃ³n)
EXPOSE 8080

# Comando que ejecutarÃ¡ la aplicaciÃ³n dentro del contenedor
CMD ["npm", "start"]
```

---

## ğŸš€ **ConstrucciÃ³n y EjecuciÃ³n con Docker**  

### ğŸ”¨ **Construir la imagen**  
Ejecuta este comando en la terminal dentro del directorio del proyecto:  

```sh
docker build -t my-node-app .
```

---

### â–¶ **Ejecutar el contenedor**  
```sh
docker run -p 8080:8080 my-node-app
```
ğŸ“Œ **La aplicaciÃ³n estarÃ¡ disponible en:**  
ğŸ”— [http://localhost:8080](http://localhost:8080)  

---

### ğŸ”„ **Ejecutar en segundo plano (modo `detached`)**  
```sh
docker run -d -p 8080:8080 my-node-app
```

### ğŸ“Œ **Ver los contenedores en ejecuciÃ³n**  
```sh
docker ps
```

### â¹ **Detener el contenedor**  
```sh
docker stop <ID_DEL_CONTENEDOR>
```

---

## ğŸ¯ **Resumen de Comandos**  

| AcciÃ³n | Comando |
|--------|---------|
| **Construir la imagen** | `docker build -t my-node-app .` |
| **Ejecutar el contenedor** | `docker run -p 8080:8080 my-node-app` |
| **Ejecutar en segundo plano** | `docker run -d -p 8080:8080 my-node-app` |
| **Ver contenedores en ejecuciÃ³n** | `docker ps` |
| **Detener el contenedor** | `docker stop <ID>` |

---

## ğŸ›  **SoluciÃ³n de Problemas**  

### âŒ `npm ERR! missing script: start`
âœ… AsegÃºrate de que `package.json` tenga:  
```json
"scripts": {
  "start": "node server.js"
}
```

### âŒ `Error: Cannot find module '/server.js'`
âœ… Verifica que `server.js` estÃ¡ en el mismo directorio que el `Dockerfile`.  
âœ… AsegÃºrate de que `COPY . .` en el `Dockerfile` copie el archivo correctamente.  

### âŒ `ERROR: failed to solve: archive/tar: unknown file mode`
âœ… Agrega `node_modules/` a `.dockerignore`.  
âœ… Ejecuta en PowerShell:  
```sh
git config --system core.longpaths true
```

---

